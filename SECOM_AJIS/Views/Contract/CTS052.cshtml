@using SECOM_AJIS.Common.Helpers
@using SECOM_AJIS.Presentation.Common.Helpers
@using SECOM_AJIS.Presentation.Contract.Helpers;
@section page_header{
    <script src="../../Scripts/jquery.maskedinput-1.3.js" type="text/javascript"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/Base/AutoComplete.js")" ></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/Base/ComboBox.js")"></script>
    <script src="../../Scripts/Base/DateTimePicker.js" type="text/javascript"></script>
    <script src="../../Scripts/Quotation/Dialog.js" type="text/javascript"></script>
    <script src="../../Scripts/Common/Dialog.js" type="text/javascript"></script>
    <script src="../../Scripts/Contract/Dialog.js" type="text/javascript"></script>
    <script type="text/javascript" src="@Url.Content("~/Scripts/Contract/CTS052.js")" ></script>
    <script type="text/javascript">
        var objPermission = { "hasPermission": "@ViewBag.hasPermission" };
        var objCaller = { "callerUrl": "@ViewBag.callerUrl" };
        var objHasSessionData = { "HasSessionData": "@ViewBag.HasSessionData" };
    </script>
}
@{
    ViewBag.LabelWidth = "250px";
    ViewBag.RightLabelWidth = "220px";
    ViewBag.ObjectWidth = "160px";
    ViewBag.RightObjectWidth = "180px";
    ViewBag.isViewMode = true;
    ViewBag.ContractTargetCustomerImportant = false;
    
    <script language="javascript" runat="server"> 
        var ObjCTS052 = { ContractCode : " @ViewBag.ContractCodeLong " , OCC : " @ViewBag.OCCCode " , ContractStatus : " @ViewBag.ContractStatus " , QuotationTargetCode : "" , Alphabet : "" , EmpNo : "" , EmpName : "" , 
                        DisplayAll : "", BillingClientCode : "", BillingOffice : "", PaymentMethod : "", Sequence : "", Mode : "", ServiceTypeCode : "@ViewBag.ServiceTypeCode" , TargetCodeType : "@ViewBag.TargetCodeTypeCode" , InstallationStatusCode : "@ViewBag.InstallationStatusCode"}
    </script>
    
    @*if (ViewBag.IsSystemSuspending)
    {
        <script language="javascript" runat="server">
            var obj = {
            module: "Common",
            code: "MSG0049"
            };
            call_ajax_method("/Shared/GetMessage", obj, function (result) {
                OpenErrorMessageDialog(result.Code, result.Message,
                function () {
                    window.location.href = generate_url("/common/CMS020");
                },
                null);
            });
        </script>
    }
    else
    {
        if (ViewBag.Permission == false || ViewBag.Permission == null)
        {
            <script language="javascript" runat="server">
                var obj = {
                module: "Common",
                code: "MSG0052"
                };
                call_ajax_method("/Shared/GetMessage", obj, function (result) {
                    OpenErrorMessageDialog(result.Code, result.Message,
                    function () {
                        window.location.href = generate_url("/common/CMS020");
                    },
                    null);
                });
            </script>
        }
        else
        {
            if (ViewBag.HasAuthorityContract == false)
            {
                <script language="javascript" runat="server">
                    var obj = {
                    module: "Common",
                    code: "MSG0063"
                    };
                    call_ajax_method("/Shared/GetMessage", obj, function (result) {
                        OpenErrorMessageDialog(result.Code, result.Message,
                        function () {
                            window.location.href = generate_url("/common/CMS020");
                        },
                        null);
                    });
                </script>
            }
            else
            {
                if (ViewBag.HasAuthorityOperation == false)
                {
                    <script language="javascript" runat="server">
                        var obj = {
                        module: "Common",
                        code: "MSG0063"
                        };
                        call_ajax_method("/Shared/GetMessage", obj, function (result) {
                            OpenErrorMessageDialog(result.Code, result.Message,
                            function () {
                                window.location.href = generate_url("/common/CMS020");
                            },
                            null);
                        });
                    </script>
                }
                else
                {
                    if (ViewBag.ISValidProductTypeCode == false || ViewBag.ISValidProductTypeCode == null)
                    {
                        <script language="javascript" runat="server">
                            var obj = {
                            module: "Contract",
                            code: "MSG3052"
                            };
                            call_ajax_method("/Shared/GetMessage", obj, function (result) {
                                OpenErrorMessageDialog(result.Code, result.Message,
                                function () {
                                        window.location.href = generate_url("/common/CMS020");
                                },
                                null);
                            });
                        </script>
                    }
                    else
                    {
                        if (ViewBag.ISValidLastImplementedOCC == false || ViewBag.ISValidLastImplementedOCC == null)
                        {
                            <script language="javascript" runat="server">
                                var obj = {
                                module: "Contract",
                                code: "MSG3040"
                                };
                                call_ajax_method("/Shared/GetMessage", obj, function (result) {
                                    OpenErrorMessageDialog(result.Code, result.Message,
                                    function () {
                                            window.location.href = generate_url("/common/CMS020");
                                    },
                                    null);
                                });
                            </script>
                        }
                        else
                        {
                            if (ViewBag.ISValidLastUnimplementOCC == false || ViewBag.ISValidLastUnimplementOCC == null)
                            {
                                <script language="javascript" runat="server">
                                    var obj = {
                                    module: "Contract",
                                    code: "MSG3039"
                                    };
                                    call_ajax_method("/Shared/GetMessage", obj, function (result) {
                                        OpenErrorMessageDialog(result.Code, result.Message,
                                        function () {
                                                window.location.href = generate_url("/common/CMS020");
                                        },
                                        null);
                                    });
                                </script>
                            }
                        }
                    }
                }
            }
        }
    }*@
    
}
@*//-Contract Change-------------------------------------------------------------------------------------------------------------------------------------------------------*@
<div id="ContractChange" class="main-table">
    <div class="usr-row">
        <div class="table-header" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblContractBasicInformation
        </div>
    </div>
    <div class="usr-row" style="height:20px">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblContractCode
        </div>
        <div class="usr-object" style="width: 100px">
            @Html.CommonTextBox("txtContractCode", (string)@ViewBag.ContractCode, new { style = "width:100px;", maxlength = "12", @readonly = true })
        </div>
        <div class="usr-label" style="width: 230px">
            @Resources.CTS052.lblUserCode
        </div>
        <div class="usr-object" style="width: 100px">
            @Html.CommonTextBox("txtUserCode", (string)@ViewBag.UserCode, new { style = "width:100px;", maxlength = "12", @readonly = true })
        </div>
    </div>
    <div class="usr-row" style="height:30px">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblCustomerCode
        </div>
        <div class="usr-object" style="width: 100px">
            @Html.CommonTextBox("txtCustomerCode", (string)@ViewBag.CustomerCode, new { style = "width:100px;", maxlength = "11", @readonly = true })
        </div>
        <div class="usr-label" style="width: 230px">
            @Resources.CTS052.lblCustomerCodeReal
        </div>
        <div class="usr-object">
            @Html.CommonTextBox("txtCustomerCodeReal", (string)@ViewBag.RealCustomerCode, new { style = "width:100px;", maxlength = "11", @readonly = true })
        </div>
        <div class="usr-label" style="width: 100px">
            @Resources.CTS052.lblSiteCode
        </div>
        <div class="usr-object">
            @Html.CommonTextBox("txtSiteCode", (string)@ViewBag.SiteCode, new { style = "width:106px;", maxlength = "16", @readonly = true })
        </div>
    </div>
    <div class="usr-row" style="height:20px">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
        </div>
        <div class="usr-object">           
            @Html.CommonCheckButton("chkIsimportantCustomer", @Resources.CTS052.lblContractTargetImportantCustomer, "", (bool)@ViewBag.ImportantFlag, new { disabled = "disabled" })
        </div>
    </div>
    <div class="usr-row usr-row-space-2x">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblContractTargetName
        </div>
        <div class="usr-object" style="width:655px;">
            @Html.CommonTextBox("txtContractTargetName", (string)@ViewBag.CustFullNameEN, new { style = "width:650px;", maxlength = "200", @readonly = true })
        </div>
    </div>
    <div class="usr-row">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblContractTargetAddress
        </div>
        <div class="usr-object" style="width:655px;">
            @Html.CommonTextBox("txtContractTargetAddress", (string)@ViewBag.AddressFullEN, new { style = "width:650px;", maxlength = "1600", @readonly = true })
        </div>
    </div>
    <div class="usr-row usr-row-space">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblSiteName
        </div>
        <div class="usr-object" style="width:655px;">
            @Html.CommonTextBox("txtSiteName", (string)@ViewBag.SiteNameEN, new { style = "width:650px;", maxlength = "200", @readonly = true })
        </div>
    </div>
    <div class="usr-row">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblSiteAddress
        </div>
        <div class="usr-object" style="width:655px;">
            @Html.CommonTextBox("txtSiteAddress", (string)@ViewBag.SiteAddressEN, new { style = "width:650px;", maxlength = "1600", @readonly = true })
        </div>
    </div>
    <div class="usr-row usr-row-space-2x">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblContractTargetNameLocal
        </div>
        <div class="usr-object" style="width:655px;">
            @Html.CommonTextBox("txtCustFullNameLC", (string)@ViewBag.CustFullNameLC, new { style = "width:650px;", maxlength = "200", @readonly = true })
        </div>
    </div>
    <div class="usr-row">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblContractTargetAddressLocal
        </div>
        <div class="usr-object" style="width:655px;">
            @Html.CommonTextBox("txtContractTargetAddressLocal", (string)@ViewBag.AddressFullLC, new { style = "width:650px;", maxlength = "200", @readonly = true })
        </div>
    </div>
    <div class="usr-row usr-row-space">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblSiteNameLocal
        </div>
        <div class="usr-object" style="width:655px;">
            @Html.CommonTextBox("txtSiteNameLocal", (string)@ViewBag.SiteNameLC, new { style = "width:650px;", maxlength = "1600", @readonly = true })
        </div>
    </div>
    <div class="usr-row">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblSiteAddressLocal
        </div>
        <div class="usr-object" style="width:655px;">
            @Html.CommonTextBox("txtSiteAddressLocal", (string)@ViewBag.SiteAddressLC, new { style = "width:650px;", maxlength = "1600", @readonly = true })
        </div>
    </div>
    <div class="usr-row usr-row-space-2x">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblInstallationStatus
        </div>
        <div class="usr-object" style="width: 360px">
            @Html.CommonTextBox("txtInstallationStatus", (string)@ViewBag.InstallationStatus, new { maxlength = "10", @readonly = true, style = "width:350px;" })
        </div>
        <div class="usr-object">
            @Html.CommonButton("btnViewInstalltionDetail", @Resources.CTS052.btnViewInstalltionDetail, new { style = "width:200px;" })
        </div>
    </div>
    <div class="usr-row">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblOperationOffice
        </div>
        <div class="usr-object" style="width: 140px;">
            @Html.CommonTextBox("txtOperationOffice", (string)@ViewBag.OfficeName, new { maxlength = "50", @readonly = true, style = "width: 140px;" })
        </div>
    </div>
    <div class="usr-clear-style" style="height: 0%">&nbsp;</div>
</div>
@*//-Change plan------------------------------------------------------------------------------------------------------------------------------------------------*@
<div id="SpecifyQuotation" class="main-table">
    <div class="table-header" style="width:@ViewBag.LabelWidth;">
        @Resources.CTS051.lblSpecifyQuotation
    </div>
    <div class="usr-row">
        <div class="usr-label" style="width: @ViewBag.LabelWidth">
            @Resources.CTS051.lblQuotationCode
        </div>
        <div class="usr-object" style="width: 250px">
            @Html.CommonTextBox("QuotationTargetCode", (string)ViewBag.QuotationTargetCode, new { style = "width:140px;", maxlength = "13" })
            @Html.CommonTextBox("Alphabet", "", new { style = "width:40px;", maxlength = "2" })
            @Html.RequireFiled()
        </div>
        <div class="usr-object">
            @Html.CommonButton("btnRetrieve", @Resources.CTS052.lblRetrieve, new { style = "width:100px;" })
            @Html.CommonButton("btnSearchQuotation", @Resources.CTS052.lblSearchQuotation, new { style = "width:150px;" })
        </div>
    </div>
    <div class="usr-row">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
        </div>
        <div class="usr-label" style="width: 848px;">
            @Html.CommonButton("btnViewQuotationDetail", @Resources.CTS052.lblViewQuotationDetail, new { style = "width:180px;" })
        </div>
        <div class="usr-label">
            @Html.CommonButton("btnSpecifyClear", @Resources.CTS052.lblSpecifyClear, new { style = "width:100px;" })
        </div>
    </div>
    <div class="usr-clear-style" style="height: 0%">&nbsp;</div>
</div>
<div class="usr-row" style="height:1px"></div>
<div id="ModifyInstrument" class="main-table">
    <div class="table-header" style="width: 600px;">
        @Resources.CTS052.lblModifyInstrument
    </div>
    <div class="usr-row" style="height:30px">
        <div class="usr-label" style="width: 250px;">
            @Resources.CTS052.lblRealInvestigationDate
        </div>
        <div class="usr-object">
            @Html.CommonTextBox("ChangeImplementDate", null, new { style = "width:140px;", maxlength = "12" })
        </div>
        <div class="usr-object">
            @Html.LabelDateFormat("ChangeImplementDate")
            @Html.RequireFiled()
        </div>
    </div>
    <div class="usr-row usr-row-space-2x">
        <div class="usr-label" style="width: 250px;">&nbsp;</div>
        <div class="usr-object">
            <div class="usr-object custom-table" style="width:100%;">
                <table cellpadding="0" cellspacing="0">
                    <tr class="hdr">
                        <td style="width:120px;">&nbsp;</td>
                        <td style="width:205px;">@Resources.CTS052.lblQuotationCondition</td>
                        <td style="width:205px;">@Resources.CTS052.lblCurrentContractFee</td>
                    </tr>
                    <tr>
                        <td style="text-align:left;">@Resources.CTS052.lblContractFee</td>
                        <td style="padding-left:1px;">
                            <div style="float:right;">
                                @Html.NumericTextBoxWithMultipleCurrency("ContractFee", (string)@ViewBag.ContractFee, (string)@ViewBag.ContractFeeCurrencyType, new { style = "width:140px;" })
                            </div>
                        </td>
                        <td style="padding-left:1px;">
                            <div style="float:right;">
                                @Html.NumericTextBoxWithMultipleCurrency("CurrentContractFee", (string)@ViewBag.ContractFee, (string)@ViewBag.ContractFeeCurrencyType, new { style = "width:140px;" })
                            </div>
                        </td>
                    </tr>
                </table>
            </div>
        </div>                           
    </div>
    <div class="usr-row usr-row-space-2x">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblNegotiationStaff1
        </div>
        <div class="usr-object">
            @Html.CommonTextBox("NegotiationStaffEmpNo1", (string)ViewBag.NegotiationStaffEmpNo1, new { style = "width:140px;", maxlength = "10" })
        </div>
        <div class="usr-object" style="width: 420px; padding-left: 5px;">
            @Html.CommonTextBox("NegotiationStaffEmpName1", (string)ViewBag.NegotiationStaffEmpName1, new { style = "width:347px;" })
            @Html.RequireFiled()
        </div>
    </div>
    <div class="usr-row">
        <div class="usr-label" style="width:@ViewBag.LabelWidth;">
            @Resources.CTS052.lblNegotiationStaff2
        </div>
        <div class="usr-object">
            @Html.CommonTextBox("NegotiationStaffEmpNo2", (string)ViewBag.NegotiationStaffEmpNo2, new { style = "width:140px;", maxlength = "10" })
        </div>
        <div class="usr-object" style="width: 420px; padding-left: 5px;">
            @Html.CommonTextBox("NegotiationStaffEmpName2", (string)ViewBag.NegotiationStaffEmpName2, new { style = "width:347px;" })
        </div>
    </div>
    <div class="usr-row" style="height:30px">
        <div class="usr-label" style="width: 250px;">
            @Resources.CTS052.lblApproveNo1
        </div>
        <div class="usr-object" style="width: 150px">
            @Html.CommonTextBox("ApproveNo1", (string)ViewBag.ApproveNo1, new { style = "width:140px;", maxlength = "15" })
        </div>
        <div class="usr-object" style="width: 106px">
            @Html.RequireFiled()
        </div>
        <div class="usr-label" style="width: 95px;">
            @Resources.CTS052.lblApproveNo2
        </div>
        <div class="usr-object" style="width: 140px">
            @Html.CommonTextBox("ApproveNo2", (string)ViewBag.ApproveNo2, new { style = "width:140px;", maxlength = "15" })
        </div>
    </div>
    <div class="usr-clear-style" style="height: 0%">&nbsp;</div>
</div>
<div id="dlgCTS052" class="main-popup-dialog">
    <div class="popup-dialog">
    </div>
</div>
